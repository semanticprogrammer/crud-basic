{>page/}
{<page_script}
<script src="/script/core.js" type="text/javascript"></script>
   <script src="/script/ajax.js" type="text/javascript"></script>
   <script src="/script/dom.js" type="text/javascript"></script>
   <script type="text/javascript">
      function removePost(url) {
         if(!window.confirm('Are you sure?')) return false;
         sps.AJAX.delete({url: url,
            onSuccess: function(data) {
               alert('Deleted Successful!')
            },
            onError: function(data) {alert('Problem!')}
         });
         return true;
      }
   </script>
   {/page_script}
{<title}<title>Posts</title>{/title}
{<content}
      <div class="border body">
         <div class="block">
            <a href="/posts/add" class="border link button">Add Post</a>            
         </div>
         <table>
            <thead>
               <tr>
                  <th scope="col">Title</th>
                  <th scope="col">Date</th>
                  <th scope="col">Content</th>
                  <th scope="col"></th>
                  <th scope="col"></th>
               </tr>
            </thead>
            <col id="title"/>
            <col id="date"/>
            <col id="content"/>
            <tbody>
               {#posts}
               <tr>
                  <td>
                     {title}
                  </td>
                  <td>
                     <time datetime="{date}" class="byline"><{date}></time>
                  </td>
                  <td>
                     {content}
                  </td>
                  <td>
                     <a href="/posts/{key}/edit" class="link button">Edit</a>
                  </td>
                  <td>
                     <a href="" onclick="removePost('/resource/posts/{key}')" class="link button">Delete</a>
                  </td>
               </tr>
               {/posts}
            </tbody>
         </table>
      </div>
{/content}